# Main subcommands for apt/apt-get
[[dynamic_completions]]
command = "apt"
description = "Complete apt subcommands"
match_condition = { type = "ArgIndex", params = 0 }
shell_command = "echo 'install remove purge update upgrade list search show autoremove full-upgrade edit-sources'"

[[dynamic_completions]]
command = "apt-get"
description = "Complete apt-get subcommands"
match_condition = { type = "ArgIndex", params = 0 }
shell_command = "echo 'install remove purge update upgrade dist-upgrade dselect-upgrade build-dep'"

# Package completion for 'install'
[[dynamic_completions]]
command = "apt"
subcommands = ["install"]
description = "Complete available package names"
match_condition = { type = "HasSubcommand" }
shell_command = "apt-cache pkgnames"

[[dynamic_completions]]
command = "apt-get"
subcommands = ["install", "build-dep"]
description = "Complete available package names"
match_condition = { type = "HasSubcommand" }
shell_command = "apt-cache pkgnames"

# Installed package completion for 'remove', 'show', etc.
[[dynamic_completions]]
command = "apt"
subcommands = ["remove", "purge", "show", "reinstall", "autoremove", "hold", "unhold"]
description = "Complete installed package names"
match_condition = { type = "HasSubcommand" }
shell_command = "dpkg --get-selections | grep -v deinstall | awk '{print $1}'"

[[dynamic_completions]]
command = "apt-get"
subcommands = ["remove", "purge", "source"]
description = "Complete installed package names"
match_condition = { type = "HasSubcommand" }
shell_command = "dpkg --get-selections | grep -v deinstall | awk '{print $1}'"
