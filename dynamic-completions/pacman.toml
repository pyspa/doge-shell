# Rule 1: Complete with AVAILABLE packages for -S (sync/install/search) operations.
[[dynamic_completions]]
command = "pacman"
description = "Complete with available packages from repositories"
# This condition triggers if '-S' is one of the typed options.
match_condition = { type = "CustomPattern", params = { command = "pacman", options_contains_any = ["S"] } }
# `pacman -Ssq` provides a clean list of package names for completion.
shell_command = "pacman -Ssq"

# Rule 2: Complete with INSTALLED packages for -R, -Q, -D, -T operations.
[[dynamic_completions]]
command = "pacman"
description = "Complete with installed packages"
# This condition triggers if '-R', '-Q', '-D', or '-T' are among the typed options.
match_condition = { type = "CustomPattern", params = { command = "pacman", options_contains_any = ["R", "Q", "D", "T"] } }
# `pacman -Qq` provides a clean list of installed package names.
shell_command = "pacman -Qq"